### 가상화 이전 서버 사용 방식의 특징

가상화 기술이 나오기 전에는 한 대의 서버를 하나의 용도로만 사용했다.

하나의 용도로만 사용하며 발생하는 비효율적인 특징은 다음과 같다.

- 한 대의 서버로 하나의 운영체제, 하나의 프로그램으로 운영 제한
- 한 대의 서버에서 사용하고 남는 서버 공간은 그대로 방치

### 하이버파이저 기반 가상화 기술 등장

가상화 기술은 이전의 비효율적인 면을 개선하기 위해 출현한 기술이다. 논리적으로 공간을 분할하여 가상 머신(VM), 독립적인 가상 환경의 서버를 이용하는 기술이다.

하이퍼바이저에 의해 구동되는 가상 머신은 독립된 가상 하드웨어 자원을 할당 받는다**(리소스 할당)**. 논리적으로 분리되어 있어 하나의 가상 머신에 오류가 발생해도 다른 가상 머신으로 오류가 퍼지지 않는다는 장점이 있다.

이는 한 대의 서버로 다수의 게스트 운영체제(OS)를 구동할 수 있게 하는 소프트웨어 역할을 하며, 하드웨어를 가상화하면서 하드웨어와 각각의 가상 머신(VM)을 모니터링 하는 관리자의 역할을 합니다.

다음 그림은 가상 머신이 분리되어 있다는 것을 보여주는 그림이다.

각 VM(Core1, Core2)은 자신의 가상 머신만을 이용하며, 다른 쪽의 가상 머신에서 에러가 발생해도 영향이 미치지 않도록 격리되어 있다.

![image](https://github.com/YoungGyo-00/TIL/assets/89639470/c6397a12-52f1-49f9-bd28-2fada38b48c3)

하이퍼바이저를 사용하며 얻을 수 있는 이점을 정리하면 다음과 같다.

- 하드웨어 독립성
  특정 하드웨어 설정의 제약을 받지 않고 소프트웨어 애플리케이션을 구성, 배포 및 관리할 수 있다.
  예) iMac 컴퓨터 대신 VM에서 MacOS를 실행할 수 있다
- 효율성
  운영 체제와 관련 소프트웨어 구성 요소를 수동으로 설치하는 것이 아닌, 가상 환경을 즉시 생성하도록 하이퍼바이저를 구성할 수 있다.
- 확장성
  여러 가상 컴퓨터를 생성하여 하나의 시스템에서 여러 워크로드를 실행할 수 있어 확장성이 좋다.
- 이동성
  필요에 따라 여러 서버에 메모리, 네트워킹, 프로세싱 및 스토리지 리소스를 할당할 수 있다. 또한 시스템이나 플랫폼 간에 워크로드를 손쉽게 이전할 수 있다.

### 도커와 가상화 기술 비교

도커를 기존의 가상화 기술을 비교할 수 있는 이유는 도커에서 이용하는 컨테이너 기술이 기존의 가상화 기술들을 이용해서 나왔기 때문이다.

다음 그림은 도커의 구조(그림 우측)와 기존의 가상화 기술(그림 좌측)의 구조를 보여준다.

![스크린샷 2023-10-13 오전 3 03 25](https://github.com/YoungGyo-00/TIL/assets/89639470/f7f20ec0-62fc-4d44-94f7-15616b6af822)

가상화 기술 구조(좌) / 도커 기술 구조(우)

가상 머신 내부에서 실행되는 애플리케이션은 호스트 운영체제/하이퍼바이저와 독립되어 있다. 특정 VM에 대한 가상화 프로세스를 관리하기 위해 프로세스를 시작, 하드웨어 자원의 일부를 할당해야 한다. 여기서 (다소 큰 용량의) 운영체제 프로세스를 시작해야 한다. 이는 VM의 크기를 크게 만들며, 느려진다는 단점을 유발한다.

도커 컨테이너에서 구동되는 애플리케이션은 여전히 같은 호스트의 다른 컨테이너와 동일한 커널을 공유하며, 가상 머신과 비교했을 때 하이퍼바이저와 게스트 OS가 필요하지 않으므로 더욱 가볍게 사용할 수 있다는 특징을 가지고 있다.

정리하면, 가상 머신은 복잡하고 무거운 반면 도커는 컨테이너 방식으로 호스트 OS 위에 가볍게 실행 패키지 이미지만을 배포하면 된다.
