# 도커 컨테이너의 생명주기

컨테이너의 생명 주기는 생성, 시작, 실행, 중지, 삭제 총 5단계로 구성되어 있다.

모든 컨테이너는 이미지로부터 시작된다. 먼저 이미지를 통해 컨테이너를 생성(create)하고, 생성한 도커 컨테이너를 시작(start)해서 실행(running) 단계로 넘어간다. 컨테이너를 잠시 멈춘 상태는 중지(stop)할 수 있으며, 아예 사용하지 않는다고 생각되면 삭제(delete)를 할 수 있다.

아래 이미지는 컨테이너의 생명 주기를 표현한 다이어그램이다.

![image](https://github.com/YoungGyo-00/TIL/assets/89639470/dca615ac-c615-4e75-9510-ec44125e6052)

컨테이너의 생명 주기를 관리할 수 있는 명령어는 다음과 같다.

### 도커 컨테이너 생성, 실행 - docker run <이미지 이름>

도커 컨테이너를 생성(create)하고 실행(start)하는 과정 2단계를 실행하는 명령어는 다음과 같다.

```jsx
$ docker create <이미지 이름>
$ docker start <컨테이너 아이디/이름>
```

- `docker create` 명령어는 도커 이미지를 이용하여 도커 컨테이너를 생성한다.
- `docker start` 명령어는 생성된 컨테이너를 시작해서 실행(running) 단계로 넘어가게 된다.

이 두 명령어를 한번에 실행시키는 명령어는 `docker run` 이다.

```jsx
$ docker run <이미지 이름>
```

### 도커 컨테이너 멈추기 - docker stop/kill

도커의 생명 주기 중 중지(stop)하는 명령어는 2가지(`stop`, `kill`)가 존재한다.

두 명령어의 차이점은 다음과 같다.

1. `stop`은 하던 작업을 모두 마치고 컨테이너를 중지시킨다.

   실제로 명령어를 입력한 후 바로 중지되는 게 아닌 몇 초 후에 중지되는 모습을 볼 수 있다.

2. `kill`은 어떠한 것도 기다리지 않고 즉시 컨테이너를 중지시킨다.

   `stop` 명령어와 다르게 입력했을 떄 바로 컨테이너가 중지되는 모습을 볼 수 있다.

명령어를 사용하는 방법은 다음과 같다.

```jsx
// 컨테이너 ID 확인하기
$ docker ps

// 멈추는 두가지 방법
$ docker stop <컨테이너 ID>
$ docker kill <컨테이너 ID>
```

### 도커 컨테이너 삭제하기 - docker rm

중지된 컨테이너를 더 이상 사용하지 않는다고 판단될 때 사용하는 명령어로, 삭제하고자 하는 컨테이너는 중지 상태여야 함을 확인해야 한다.

```jsx
$ docker ps
$ docker rm <컨테이너 ID>
```
